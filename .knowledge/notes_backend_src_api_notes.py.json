{"is_source_file": true, "format": "Python", "description": "This file implements a REST API for managing notes using FastAPI and SQLite. It defines data models, route handlers for CRUD operations (list, create, retrieve, update, delete), and handles database interactions with error handling.", "external_files": ["src.api.db"], "external_methods": ["get_connection"], "published": ["list_notes", "create_note", "get_note", "update_note", "delete_note"], "classes": [{"name": "NoteBase", "description": "Shared base model for note fields, includes title and content."}, {"name": "NoteCreate", "description": "Model for payload to create a new note, inherits from NoteBase."}, {"name": "NoteUpdate", "description": "Model for payload to update an existing note with optional fields."}, {"name": "NoteOut", "description": "Model representing a note as returned by the API, including metadata like id and timestamps."}], "methods": [{"name": "NoteOut _row_to_note(row: sqlite3.Row)", "description": "Helper function to convert a sqlite3.Row into a NoteOut object.", "scope": "", "scopeKind": ""}, {"name": "List[NoteOut] list_notes()", "description": "API endpoint to retrieve all notes, sorted by most recently updated.", "scope": "", "scopeKind": ""}, {"name": "NoteOut create_note(payload: NoteCreate)", "description": "API endpoint to create a new note.", "scope": "", "scopeKind": ""}, {"name": "NoteOut get_note(note_id: int)", "description": "API endpoint to retrieve a single note by its ID.", "scope": "", "scopeKind": ""}, {"name": "NoteOut update_note(note_id: int, payload: NoteUpdate)", "description": "API endpoint to update an existing note by its ID, supporting partial updates.", "scope": "", "scopeKind": ""}, {"name": "Response delete_note(note_id: int)", "description": "API endpoint to delete a note by its ID.", "scope": "", "scopeKind": ""}], "calls": ["get_connection", "conn.execute", "conn.execute", "conn.execute", "conn.execute", "conn.execute", "conn.execute", "conn.execute", "conn.execute", "conn.execute", "conn.execute", "conn.execute", "conn.execute", "conn.execute", "conn.execute", "conn.execute"], "search-terms": ["notes_rest_api", "CRUD_operations", "FastAPI_notes", "sqlite_notes", "notes_endpoint", "NoteModel"], "state": 2, "file_id": 6, "knowledge_revision": 16, "git_revision": "e9e09d23319a045ba4a7094ba577feb5e7f1f30b", "revision_history": [{"15": "1df5cd3da1b52ebca48005ac735ebc01bf8350f5"}, {"16": "e9e09d23319a045ba4a7094ba577feb5e7f1f30b"}], "ctags": [{"_type": "tag", "name": "NoteBase", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^class NoteBase(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteCreate", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^class NoteCreate(NoteBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteOut", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^class NoteOut(NoteBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteUpdate", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^class NoteUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_row_to_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^def _row_to_note(row: sqlite3.Row) -> NoteOut:$/", "language": "Python", "typeref": "typename:NoteOut", "kind": "function", "signature": "(row: sqlite3.Row)"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^    content: Optional[str] = Field(None, min_length=1, max_length=20000, description=\"Updated no/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^    content: str = Field(..., min_length=1, max_length=20000, description=\"Note content\\/body\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteBase", "scopeKind": "class"}, {"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^def create_note(payload: NoteCreate) -> NoteOut:$/", "language": "Python", "typeref": "typename:NoteOut", "kind": "function", "signature": "(payload: NoteCreate)"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^    created_at: str = Field(..., description=\"ISO timestamp when created\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteOut", "scopeKind": "class"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^def delete_note(note_id: int) -> Response:$/", "language": "Python", "typeref": "typename:Response", "kind": "function", "signature": "(note_id: int)"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^def get_note(note_id: int) -> NoteOut:$/", "language": "Python", "typeref": "typename:NoteOut", "kind": "function", "signature": "(note_id: int)"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^    id: int = Field(..., description=\"Unique note identifier\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "NoteOut", "scopeKind": "class"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^def list_notes() -> List[NoteOut]:$/", "language": "Python", "typeref": "typename:List[NoteOut]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^router = APIRouter(prefix=\"\\/notes\", tags=[\"notes\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^    title: Optional[str] = Field(None, min_length=1, max_length=200, description=\"Updated note t/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^    title: str = Field(..., min_length=1, max_length=200, description=\"Note title\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteBase", "scopeKind": "class"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^def update_note(note_id: int, payload: NoteUpdate) -> NoteOut:$/", "language": "Python", "typeref": "typename:NoteOut", "kind": "function", "signature": "(note_id: int, payload: NoteUpdate)"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/simple-notes-app-195720-195729/notes_backend/src/api/notes.py", "pattern": "/^    updated_at: str = Field(..., description=\"ISO timestamp when last updated\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteOut", "scopeKind": "class"}], "hash": "212240cbfdafabe17c8418919ed95f20", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/notes.py", "fields": [{"name": "Optional[str] content", "scope": "NoteUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str content", "scope": "NoteBase", "scopeKind": "class", "description": "unavailable"}, {"name": "str created_at", "scope": "NoteOut", "scopeKind": "class", "description": "unavailable"}, {"name": "int id", "scope": "NoteOut", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/notes\", tags=[\"notes\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[str] title", "scope": "NoteUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str title", "scope": "NoteBase", "scopeKind": "class", "description": "unavailable"}, {"name": "str updated_at", "scope": "NoteOut", "scopeKind": "class", "description": "unavailable"}]}